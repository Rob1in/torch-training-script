name: jsonl

# Dataset paths
# Update these paths to point to your dataset location
data:
  train_jsonl: path/to/dataset.jsonl  # Path to training JSONL file
  train_data_dir: path/to/data  # Directory containing training images
  val_jsonl: path/to/dataset.jsonl  # Path to validation JSONL file (can be same file with split)
  val_data_dir: path/to/data  # Directory containing validation images
  test_jsonl: path/to/dataset.jsonl  # Path to test JSONL file
  test_data_dir: path/to/data  # Directory containing test images
  # test_annotations_coco: path/to/annotations.json  # Optional: Pre-converted COCO format ground truth

# Transform configuration
# Note: Transforms are applied via GPUCollate in the dataloader BEFORE model.forward()
#
# ⚠️ RESIZE BEHAVIOR - READ CAREFULLY:
#
# ALL detection models have an internal GeneralizedRCNNTransform that runs in model.forward()
# This internal transform ALWAYS resizes and normalizes images automatically.
#
# pretrained=false (train from scratch):
#   - Model's internal transform uses YOUR config (model.transform.input_size)
#   - Dataset Resize to same size → Model transform sees correct size → Works perfectly ✓
#   - Resize is REQUIRED for batching images together
#
# pretrained=true (transfer learning):
#   - Model's internal transform uses COCO settings (hardcoded in pretrained weights)
#   - SSDLite COCO: 320x320 → Match config to 320x320 → OK ✓
#   - Faster R-CNN COCO: 800x1333 → Match config to 800x1333 → OK ✓
#   - Mismatch (e.g., config=480x640, model=800x1333) → Double resize → Suboptimal ⚠️
#
# RECOMMENDATION:
#   - Set model.transform.input_size to match the model's expected size
#   - Faster R-CNN pretrained: [800, 1333]
#   - SSDLite pretrained: [320, 320]
#   - Training from scratch: Any size you want
transform:
  train:
    # Resize is REQUIRED for batching. Should match model's internal transform size.
    # ${model.transform.input_size} automatically adapts to your model config
    - name: Resize
      params:
        size: ${model.transform.input_size}
    - name: Normalize
      params:
        mean: [0.485, 0.456, 0.406]
        std: [0.229, 0.224, 0.225]
    # - name: RandomRotation
    #   params: 
    #     degrees: 10 
    #     p: 0.3
    #     expand: false
    # - name: RandomHorizontalFlip
    #   params:
    #     p: 0.5 
    # - name: RandomVerticalFlip
    #   params:
    #     p: 0.2 
    # - name: ColorJitter
    #   params:
    #     brightness: 0.2 
    #     contrast: 0.2
    #     p: 0.5
    # - name: RandomGaussianNoise
    #   params:
    #     mean: 0.0
    #     std: 0.1
    #     p: 0.5
    # - name: RandomGamma
    #   params: 
    #     gamma: 1
    #     p: 0.5

  val:
    # Match model's internal transform size to avoid issues
    - name: Resize
      params:
        size: ${model.transform.input_size}
    - name: Normalize
      params: 
        mean: [0.485, 0.456, 0.406]
        std: [0.229, 0.224, 0.225]
        
  test:
    # Match model's internal transform size to avoid issues
    - name: Resize
      params:
        size: ${model.transform.input_size}
    - name: Normalize
      params:
        mean: [0.485, 0.456, 0.406]
        std: [0.229, 0.224, 0.225]

