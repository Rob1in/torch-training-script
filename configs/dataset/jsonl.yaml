name: jsonl

# Dataset paths
# Update these paths to point to your dataset location
data:
  train_jsonl: path/to/dataset.jsonl  # Path to training JSONL file
  train_data_dir: path/to/data  # Directory containing training images
  val_jsonl: path/to/dataset.jsonl  # Path to validation JSONL file (can be same file with split)
  val_data_dir: path/to/data  # Directory containing validation images
  test_jsonl: path/to/dataset.jsonl  # Path to test JSONL file
  test_data_dir: path/to/data  # Directory containing test images
  # test_annotations_coco: path/to/annotations.json  # Optional: Pre-converted COCO format ground truth

# Transform configuration
# Note: Transforms are applied via GPUCollate in the dataloader BEFORE model.forward()
#
# NORMALIZATION: DO NOT add Normalize here!
# All torchvision detection models (Faster R-CNN, SSDLite) have a built-in
# GeneralizedRCNNTransform that handles normalization AND resize internally.
# Adding Normalize here would cause DOUBLE normalization → broken model output.
#
# RESIZE: Keep Resize here for batching.
# Images in a batch must be the same size for torch.stack(). The model's internal
# transform will then see already-resized images and essentially skip its own resize.
#
# AUGMENTATIONS: Add augmentations here (flip, rotation, jitter, etc.)
# The model does NOT do augmentations — that's the dataloader's job.
#
# RECOMMENDATION:
#   - Set model.transform.input_size to match the model's expected size
#   - Faster R-CNN pretrained: [800, 1333]
#   - SSDLite pretrained: [320, 320]
#   - Training from scratch: Any size you want
transform:
  train:
    # Resize is REQUIRED for batching. Should match model's internal transform size.
    # ${model.transform.input_size} automatically adapts to your model config
    - name: Resize
      params:
        size: ${model.transform.input_size}
    # Augmentations (uncomment as needed):
    # - name: RandomRotation
    #   params: 
    #     degrees: 10 
    #     p: 0.3
    #     expand: false
    # - name: RandomHorizontalFlip
    #   params:
    #     p: 0.5 
    # - name: RandomVerticalFlip
    #   params:
    #     p: 0.2 
    # - name: ColorJitter
    #   params:
    #     brightness: 0.2 
    #     contrast: 0.2
    #     p: 0.5
    # - name: RandomGaussianNoise
    #   params:
    #     mean: 0.0
    #     std: 0.1
    #     p: 0.5
    # - name: RandomGamma
    #   params: 
    #     gamma: 1
    #     p: 0.5

  val:
    - name: Resize
      params:
        size: ${model.transform.input_size}
        
  test:
    - name: Resize
      params:
        size: ${model.transform.input_size}
